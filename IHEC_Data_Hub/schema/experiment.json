{
    "$schema": "http://json-schema.org/draft-04/schema#",
    "id": "http://epigenomesportal.ca/schemas/experiment.json",
    "title": "IHEC Data Hub Experiment schema",
    "description": "IHEC Data Hub Experiment schema",
    "type" : "object",

    "properties": {
        "reference_registry_id": {"type": "string", "description": "The IHEC EpiRR ID for this dataset, only for IHEC Reference Epigenome datasets. Otherwise leave empty."},

        "experiment_type": {"type": "string", "description": "DNA Methylation, mRNA-Seq, ChIP-Seq Input..."},
        "experiment_ontology_uri": {"type": "string", "description": "(Ontology: OBI) links to experiment ontology information."},
        "library_strategy": {"type": "string", "enum": [""], "description": "(Controlled Vocabulary) The assay used. These are defined within the SRA metadata specifications with a controlled vocabulary (e.g. ‘Bisulfite-Seq’, ‘RNA-Seq’, ‘ChIP-Seq’). For a complete list, see https://www.ebi.ac.uk/ena/submit/reads-library-strategy."},
        "molecule_ontology_uri" : {"type": "string", "description": "(Ontology: SO) links to molecule ontology information."},
        "molecule" : {"type": "string", "enum": ["total RNA", "polyA RNA", "cytoplasmic RNA", "nuclear RNA", "genomic DNA", "protein", "other"], "description": "(Controlled Vocabulary) The type of molecule that was extracted from the biological material. Include one of the following: total RNA, polyA RNA, cytoplasmic RNA, nuclear RNA, genomic DNA, protein, or other."}
    },

    "anyOf": [
        { "$ref": "file:schema/experiment.json#/definitions/chromatin_accessibility" },
        { "$ref": "file:schema/experiment.json#/definitions/other" }
    ],

    "required": ["experiment_type", "experiment_ontology_uri", "library_strategy"],

    "definitions": {
        "chromatin_accessibility": {
            "type": "object",
            "properties": {
                "experiment_type": {"type": "string", "enum": ["Chromatin Accessibility"]},
                "library_strategy": {"type": "string", "enum": ["DNase-Hypersensitivity"]},

                "extraction_protocol": {"type": "string", "description": "The protocol used to isolate the extract material."},
                "dnase_protocol": {"type": "string", "description": "The protocol used for DNAse treatment."}
            }
        },


        "bisulfite-seq": {
            "type": "object",
            "properties": {
                "experiment_type": {"type": "string", "enum": ["Chromatin Accessibility"]},
                "extraction_protocol": {"type": "string", "description": "The protocol used to isolate the extract material."},
                "dnase_protocol": {"type": "string", "description": "The protocol used for DNAse treatment."}
            }
        },



        "other": {
            "type": "object",
            "properties": {
                "experiment_type": {"type": "string", "enum": ["Other"]}
            }
        }
    }


}